"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},geochart_geojson={};!function(t){function e(t){var e={};return e.color=t.color,e.fontFamily=t.fontName,e.fontSize=t.fontSize,t.bold&&(e.fontWeight="bold"),t.italic&&(e.fontStyle="italic"),e}function o(t,e){return Object.entries(e).forEach(function(e){e[0]in t&&"object"===_typeof(t[e[0]])&&null!==t[e[0]]&&"object"===_typeof(e[1])?o(t[e[0]],e[1]):t[e[0]]=e[1]}),t}var i={borderStyle:"solid",borderWidth:"1px",borderColor:"#cccccc",backgroundColor:"#ffffff",padding:"4px"},a=function(t){this.container=t,this.data_=null,this.options_=null,this.maps_map_=null,this.tooltip_=null,this.color_axis_=null,this.min_=0,this.max_=0,this.feature_selected_=null};a.prototype.DEFAULT_OPTIONS={colorAxis:{colors:["#efe6dc","#109618"],strokeColors:["#cccccc","#888888"]},datalessRegionColor:"#f5f5f5",datalessRegionStrokeColor:"#cccccc",defaultColor:"#267114",defaultStrokeColor:"#666666",displayMode:"regions",featureStyle:{fillOpacity:1,strokeWeight:1,strokeOpacity:.5},featureStyleHighlighted:{strokeWeight:2,strokeOpacity:1},geoJson:null,geoJsonOptions:null,legend:{position:"LEFT_BOTTOM",textStyle:{color:"#000000",fontName:"Arial",fontSize:14,bold:!1,italic:!1}},mapsOptions:null,mapsBackground:"none",mapsControl:!1,tooltip:{textStyle:{color:"#000000",fontName:"Arial",fontSize:"13px",bold:!1,italic:!1},trigger:"focus"}},a.prototype.getMapsOptions_=function(){var t=this.options_.mapsOptions;if("none"!==this.options_.mapsBackground)throw new Error("Invalid `mapsBackground` option");if(t.styles=[{stylers:[{visibility:"off"}]}],t.backgroundColor="none",!1!==this.options_.mapsControl)throw new Error("Invalid `mapsControl` option");return t.disableDefaultUI=!0,t.scrollwheel=!1,t.draggable=!1,t.disableDoubleClickZoom=!0,t},a.prototype.draw=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.data_=e,this.options_=o(t.GeoChart.prototype.DEFAULT_OPTIONS,i);var a=this.getMapsOptions_();this.map_=new google.maps.Map(this.container,a),this.map_.data.loadGeoJson(this.options_.geoJson,this.options_.geoJsonOptions,function(t){for(var o=Number.MAX_VALUE,i=-Number.MAX_VALUE,a=0;a<e.getNumberOfRows();a++){var n=e.getValue(a,0),l=e.getValue(a,1),d=this.map_.data.getFeatureById(n);l<o&&(o=l),l>i&&(i=l),d.setProperty("data-row",a),d.setProperty("data-id",n),d.setProperty("data-label",e.getColumnLabel(1)),d.setProperty("data-value",l)}this.min_=o,this.max_=i,this.color_axis_=new s(this),this.map_.controls[google.maps.ControlPosition[this.options_.legend.position]].push(this.color_axis_.getContainer()),this.tooltip_=new r(this),google.visualization.events.trigger(this,"ready",null)}.bind(this)),this.map_.data.setStyle(function(t){var e=Object.assign({},{cursor:"default",fillColor:this.options_.datalessRegionColor,strokeColor:this.options_.datalessRegionStrokeColor},this.options_.featureStyle);if(void 0!==t.getProperty("data-value")){for(var o=[],i=[],a=[this.getColorArray_(this.options_.colorAxis.colors[0]),this.getColorArray_(this.options_.colorAxis.colors[1])],r=[this.getColorArray_(this.options_.colorAxis.strokeColors[0]),this.getColorArray_(this.options_.colorAxis.strokeColors[1])],s=this.getRelativeValue_(t.getProperty("data-value")),n=0;n<3;n++)o[n]=Math.round((a[1][n]-a[0][n])*s+a[0][n]),i[n]=Math.round((r[1][n]-r[0][n])*s+r[0][n]);e=Object.assign(e,{fillColor:this.getColorArrayStr_(o),strokeColor:this.getColorArrayStr_(i)}),!0===t.getProperty("data-selected")&&(e=Object.assign(e,this.options_.featureStyleHighlighted,{zIndex:999}))}return e}.bind(this)),this.map_.data.addListener("mouseover",function(t){var e=Object.assign({},this.options_.featureStyleHighlighted,{zIndex:1e3});t.feature!==this.feature_selected_&&(this.map_.data.revertStyle(),this.map_.data.overrideStyle(t.feature,e)),void 0!==t.feature.getProperty("data-value")&&this.color_axis_.drawIndicator(t.feature)}.bind(this)),this.map_.data.addListener("mouseout",function(t){t.feature!==this.feature_selected_&&this.map_.data.revertStyle(),this.tooltip_.undrawTooltip(),this.color_axis_.undrawIndicator()}.bind(this)),this.map_.data.addListener("mousemove",function(t){void 0!==t.feature.getProperty("data-value")&&this.tooltip_.drawTooltip(t.feature,t.latLng)}.bind(this)),this.map_.data.addListener("click",function(t){this.map_.data.revertStyle(),t.feature!==this.feature_selected_&&(void 0!==t.feature.getProperty("data-value")?this.selectFeature_(t.feature):this.unselectFeature_())}.bind(this)),this.map_.addListener("click",function(t){this.map_.data.revertStyle(),this.unselectFeature_()}.bind(this))},a.prototype.getColorArray_=function(t){t=t.replace(/^#?([\da-f])([\da-f])([\da-f])$/i,function(t,e,o,i){return"#"+e+e+o+o+i+i});var e=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(t);if(!e)throw new Error("Invalid color string");return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]},a.prototype.getColorArrayStr_=function(t){return"rgb("+t[0]+", "+t[1]+", "+t[2]+")"},a.prototype.getRelativeValue_=function(t){return(t-this.min_)/(this.max_-this.min_)},a.prototype.getSelection=function(){return this.feature_selected_?[{row:this.feature_selected_.getProperty("data-row"),column:null}]:[]},a.prototype.setSelection=function(t){var e="",o=null;t.length?1===t.length&&(e=this.data_.getValue(t[0].row,0),o=this.map_.data.getFeatureById(e),this.selectFeature_(o)):this.unselectFeature_()},a.prototype.selectFeature_=function(t){this.unselectFeature_(),this.feature_selected_=t,this.feature_selected_.setProperty("data-selected",!0)},a.prototype.unselectFeature_=function(){this.feature_selected_&&(this.feature_selected_.removeProperty("data-selected"),this.feature_selected_=null)},t.GeoChart=a;var r=function(t){this.geo_chart_=t,this.div_=null,this.id_span_=null,this.label_span_=null,this.value_span_=null,this.LatLng=null,this.setMap(t.map_)};r.prototype=new google.maps.OverlayView,r.prototype.onAdd=function(){var t=document.createElement("div"),o={};o=Object.assign({},{position:"absolute",visibility:"hidden"},i,{zIndex:2e3}),Object.assign(t.style,o);var a=Object.assign({},{margin:"2px"},e(this.geo_chart_.options_.tooltip.textStyle)),r=document.createElement("p");Object.assign(r.style,a);var s=document.createElement("span");s.style.fontWeight="bold",r.appendChild(s),t.appendChild(r);var n=document.createElement("p");Object.assign(n.style,a);var l=document.createElement("span"),d=document.createElement("span");d.style.fontWeight="bold",n.appendChild(l),n.appendChild(document.createTextNode(": ")),n.appendChild(d),t.appendChild(n),this.div_=t,this.id_span_=s,this.label_span_=l,this.value_span_=d,this.getPanes().overlayLayer.appendChild(t)},r.prototype.draw=function(){},r.prototype.drawTooltip=function(t,e){var o=t.getId();o!==this.id_span_.innerText&&(this.id_span_.innerText=o,this.label_span_.innerText=t.getProperty("data-label"),this.value_span_.innerText=t.getProperty("data-value"));var i=this.getProjection().fromLatLngToDivPixel(e),a=this.div_.offsetWidth,r=this.div_.offsetHeight,s=0,n=0;s=i.y-12-r,n=i.x-12-a,s<0&&(s=i.y+12),n<0&&(n=i.x+12),this.div_.style.top=s,this.div_.style.left=n,this.div_.style.visibility="visible"},r.prototype.undrawTooltip=function(){this.div_.style.visibility="hidden"},t.Tooltip=r;var s=function(t){this.geo_chart_=t,this.div_=null,this.indicator_span_=null,this.draw_()};s.prototype.draw_=function(){var t=document.createElement("div"),o=document.createElement("div");Object.assign(o.style,{marginTop:"8px"},e(this.geo_chart_.options_.legend.textStyle));var i=document.createElement("div");i.style.padding="4px",i.style.display="table-cell",i.innerText=this.geo_chart_.min_,o.appendChild(i);var a=document.createElement("div");a.style.display="table-cell",a.style.verticalAlign="middle",a.style.position="relative",a.style.padding="0",a.style.margin="0";var r=document.createElement("div");r.style.width="250px",r.style.height="13px",r.style.padding="0",r.style.margin="0",r.setAttribute("style",r.getAttribute("style")+"; "+this.getGradientStr_()),a.appendChild(r);var s=document.createElement("span");s.style.fontSize="12px",s.style.top=-8,s.style.position="absolute",s.style.visibility="hidden",s.innerText="â–¼",a.appendChild(s),o.appendChild(a);var n=document.createElement("div");n.style.padding="4px",n.style.display="table-cell",n.innerText=this.geo_chart_.max_,o.appendChild(n),t.appendChild(o),this.div_=t,this.indicator_span_=s},s.prototype.getGradientStr_=function(){var t="background-image: -o-linear-gradient(left, {c1}, {c2}); background-image: -moz-linear-gradient(left, {c1}, {c2}); background-image: -webkit-linear-gradient(left, {c1}, {c2}); background-image: -ms-linear-gradient(left, {c1}, {c2}); background: linear-gradient(left, {c1}, {c2})",e=[this.geo_chart_.getColorArray_(this.geo_chart_.options_.colorAxis.colors[0]),this.geo_chart_.getColorArray_(this.geo_chart_.options_.colorAxis.colors[1])],o=[this.geo_chart_.getColorArrayStr_(e[0]),this.geo_chart_.getColorArrayStr_(e[1])];return t=t.replace(/\{c1\}/g,o[0]).replace(/\{c2\}/g,o[1])},s.prototype.getContainer=function(){return this.div_},s.prototype.drawIndicator=function(t){var e=this.geo_chart_.getRelativeValue_(t.getProperty("data-value"));this.indicator_span_.style.left=250*e-6+"px",this.indicator_span_.style.visibility="visible"},s.prototype.undrawIndicator=function(){this.indicator_span_.style.visibility="hidden"},t.ColorAxis=s}(geochart_geojson);